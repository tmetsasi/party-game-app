{"ast":null,"code":"import*as React from'react';import View from\"react-native-web/dist/exports/View\";var CSSTransitions={WebkitTransition:'webkitTransitionEnd',Transition:'transitionEnd',MozTransition:'transitionend',MSTransition:'msTransitionEnd',OTransition:'oTransitionEnd'};export function NativeSafeAreaProvider(_ref){var children=_ref.children,style=_ref.style,onInsetsChange=_ref.onInsetsChange;React.useEffect(function(){if(typeof document==='undefined'){return;}var element=createContextElement();document.body.appendChild(element);var onEnd=function onEnd(){var _window$getComputedSt=window.getComputedStyle(element),paddingTop=_window$getComputedSt.paddingTop,paddingBottom=_window$getComputedSt.paddingBottom,paddingLeft=_window$getComputedSt.paddingLeft,paddingRight=_window$getComputedSt.paddingRight;var insets={top:paddingTop?parseInt(paddingTop,10):0,bottom:paddingBottom?parseInt(paddingBottom,10):0,left:paddingLeft?parseInt(paddingLeft,10):0,right:paddingRight?parseInt(paddingRight,10):0};var frame={x:0,y:0,width:document.documentElement.offsetWidth,height:document.documentElement.offsetHeight};onInsetsChange({nativeEvent:{insets:insets,frame:frame}});};element.addEventListener(getSupportedTransitionEvent(),onEnd);onEnd();return function(){document.body.removeChild(element);element.removeEventListener(getSupportedTransitionEvent(),onEnd);};},[onInsetsChange]);return React.createElement(View,{style:style},children);}var _supportedTransitionEvent=null;function getSupportedTransitionEvent(){if(_supportedTransitionEvent!=null){return _supportedTransitionEvent;}var element=document.createElement('invalidtype');_supportedTransitionEvent=CSSTransitions.Transition;for(var key in CSSTransitions){if(element.style[key]!==undefined){_supportedTransitionEvent=CSSTransitions[key];break;}}return _supportedTransitionEvent;}var _supportedEnv=null;function getSupportedEnv(){if(_supportedEnv!==null){return _supportedEnv;}var _window=window,CSS=_window.CSS;if(CSS&&CSS.supports&&CSS.supports('top: constant(safe-area-inset-top)')){_supportedEnv='constant';}else{_supportedEnv='env';}return _supportedEnv;}function getInset(side){return getSupportedEnv()+\"(safe-area-inset-\"+side+\")\";}function createContextElement(){var element=document.createElement('div');var style=element.style;style.position='fixed';style.left='0';style.top='0';style.width='0';style.height='0';style.zIndex='-1';style.overflow='hidden';style.visibility='hidden';style.transitionDuration='0.05s';style.transitionProperty='padding';style.transitionDelay='0s';style.paddingTop=getInset('top');style.paddingBottom=getInset('bottom');style.paddingLeft=getInset('left');style.paddingRight=getInset('right');return element;}","map":{"version":3,"sources":["NativeSafeAreaProvider.web.tsx"],"names":["React","CSSTransitions","WebkitTransition","Transition","MozTransition","MSTransition","OTransition","NativeSafeAreaProvider","children","style","onInsetsChange","useEffect","document","element","createContextElement","body","appendChild","onEnd","paddingTop","paddingBottom","paddingLeft","paddingRight","window","getComputedStyle","insets","top","parseInt","bottom","left","right","frame","x","y","width","documentElement","offsetWidth","height","offsetHeight","nativeEvent","addEventListener","getSupportedTransitionEvent","removeChild","removeEventListener","_supportedTransitionEvent","createElement","key","undefined","_supportedEnv","getSupportedEnv","CSS","supports","getInset","side","position","zIndex","overflow","visibility","transitionDuration","transitionProperty","transitionDelay"],"mappings":"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","sourcesContent":["/* eslint-env browser */\n\nimport * as React from 'react';\nimport { View } from 'react-native';\nimport type { NativeSafeAreaProviderProps } from './SafeArea.types';\n\n/**\n * TODO:\n * Currently insets and frame are based on the window and are not\n * relative to the provider view. This is inconsistent with iOS and Android.\n * However in most cases if the provider view covers the screen this is not\n * an issue.\n */\n\nconst CSSTransitions: Record<string, string> = {\n  WebkitTransition: 'webkitTransitionEnd',\n  Transition: 'transitionEnd',\n  MozTransition: 'transitionend',\n  MSTransition: 'msTransitionEnd',\n  OTransition: 'oTransitionEnd',\n};\n\nexport function NativeSafeAreaProvider({\n  children,\n  style,\n  onInsetsChange,\n}: NativeSafeAreaProviderProps) {\n  React.useEffect(() => {\n    // Skip for SSR.\n    if (typeof document === 'undefined') {\n      return;\n    }\n\n    const element = createContextElement();\n    document.body.appendChild(element);\n    const onEnd = () => {\n      const { paddingTop, paddingBottom, paddingLeft, paddingRight } =\n        window.getComputedStyle(element);\n\n      const insets = {\n        top: paddingTop ? parseInt(paddingTop, 10) : 0,\n        bottom: paddingBottom ? parseInt(paddingBottom, 10) : 0,\n        left: paddingLeft ? parseInt(paddingLeft, 10) : 0,\n        right: paddingRight ? parseInt(paddingRight, 10) : 0,\n      };\n      const frame = {\n        x: 0,\n        y: 0,\n        width: document.documentElement.offsetWidth,\n        height: document.documentElement.offsetHeight,\n      };\n      // @ts-ignore: missing properties\n      onInsetsChange({ nativeEvent: { insets, frame } });\n    };\n    element.addEventListener(getSupportedTransitionEvent(), onEnd);\n    onEnd();\n    return () => {\n      document.body.removeChild(element);\n      element.removeEventListener(getSupportedTransitionEvent(), onEnd);\n    };\n  }, [onInsetsChange]);\n\n  return <View style={style}>{children}</View>;\n}\n\nlet _supportedTransitionEvent: string | null | undefined = null;\nfunction getSupportedTransitionEvent(): string {\n  if (_supportedTransitionEvent != null) {\n    return _supportedTransitionEvent;\n  }\n  const element = document.createElement('invalidtype');\n\n  _supportedTransitionEvent = CSSTransitions.Transition;\n  for (const key in CSSTransitions) {\n    if (element.style[key as keyof CSSStyleDeclaration] !== undefined) {\n      _supportedTransitionEvent = CSSTransitions[key];\n      break;\n    }\n  }\n  return _supportedTransitionEvent as string;\n}\n\ntype CssEnv = 'constant' | 'env';\n\nlet _supportedEnv: CssEnv | null = null;\nfunction getSupportedEnv(): CssEnv {\n  if (_supportedEnv !== null) {\n    return _supportedEnv;\n  }\n  const { CSS } = window;\n  if (\n    CSS &&\n    CSS.supports &&\n    CSS.supports('top: constant(safe-area-inset-top)')\n  ) {\n    _supportedEnv = 'constant';\n  } else {\n    _supportedEnv = 'env';\n  }\n  return _supportedEnv;\n}\n\nfunction getInset(side: string): string {\n  return `${getSupportedEnv()}(safe-area-inset-${side})`;\n}\n\nfunction createContextElement(): HTMLElement {\n  const element = document.createElement('div');\n  const { style } = element;\n  style.position = 'fixed';\n  style.left = '0';\n  style.top = '0';\n  style.width = '0';\n  style.height = '0';\n  style.zIndex = '-1';\n  style.overflow = 'hidden';\n  style.visibility = 'hidden';\n  // Bacon: Anything faster than this and the callback will be invoked too early with the wrong insets\n  style.transitionDuration = '0.05s';\n  style.transitionProperty = 'padding';\n  style.transitionDelay = '0s';\n  style.paddingTop = getInset('top');\n  style.paddingBottom = getInset('bottom');\n  style.paddingLeft = getInset('left');\n  style.paddingRight = getInset('right');\n  return element;\n}\n"]},"metadata":{},"sourceType":"module"}