{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport InlineTextButton from \"../components/InlineTextButton\";\nimport AppStyles from \"../styles/AppStyles\";\nimport { auth, db } from \"../firebase\";\nimport { collection, addDoc, query, where, getDocs, deleteDoc, doc, setDoc } from \"firebase/firestore\";\nimport { sendEmailVerification } from 'firebase/auth';\nimport React from 'react';\nimport AddToDoModal from \"../components/AddToDoModal\";\nimport BouncyCheckbox from 'react-native-bouncy-checkbox';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ToDo(_ref) {\n  var navigation = _ref.navigation;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    modalVisible = _React$useState2[0],\n    setModalVisible = _React$useState2[1];\n  var _React$useState3 = React.useState(true),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    isLoading = _React$useState4[0],\n    setIsLoading = _React$useState4[1];\n  var _React$useState5 = React.useState(false),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    isRefreshing = _React$useState6[0],\n    setIsRefreshing = _React$useState6[1];\n  var _React$useState7 = React.useState([]),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    toDos = _React$useState8[0],\n    setToDos = _React$useState8[1];\n  var loadToDoList = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var q = query(collection(db, \"todos\"), where(\"userId\", \"==\", auth.currentUser.uid));\n      var querySnapshot = yield getDocs(q);\n      var toDos = [];\n      querySnapshot.forEach(function (doc) {\n        var toDo = doc.data();\n        toDo.id = doc.id;\n        toDos.push(toDo);\n      });\n      setToDos(toDos);\n      setIsLoading(false);\n      setIsRefreshing(false);\n    });\n    return function loadToDoList() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  if (isLoading) {\n    loadToDoList();\n  }\n  var checkToDoItem = function checkToDoItem(item, isChecked) {\n    var toDoRef = doc(db, 'todos', item.id);\n    setDoc(toDoRef, {\n      completed: isChecked\n    }, {\n      merge: true\n    });\n  };\n  var deleteToDo = function () {\n    var _ref3 = _asyncToGenerator(function* (toDoId) {\n      yield deleteDoc(doc(db, \"todos\", toDoId));\n      var updatedToDos = _toConsumableArray(toDos).filter(function (item) {\n        return item.id != toDoId;\n      });\n      setToDos(updatedToDos);\n    });\n    return function deleteToDo(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var renderToDoItem = function renderToDoItem(_ref4) {\n    var item = _ref4.item;\n    return _jsxs(View, {\n      style: [AppStyles.rowContainer, AppStyles.rightMargin, AppStyles.leftMargin],\n      children: [_jsx(View, {\n        style: AppStyles.fillSpace,\n        children: _jsx(BouncyCheckbox, {\n          isChecked: item.complated,\n          size: 25,\n          fillColor: \"#258ea6\",\n          unfillColor: \"#FFFFFF\",\n          text: item.text,\n          iconStyle: {\n            borderColor: \"#258ea6\"\n          },\n          onPress: function onPress(isChecked) {\n            checkToDoItem(item, isChecked);\n          }\n        })\n      }), _jsx(InlineTextButton, {\n        text: \"Delete\",\n        color: \"#258ea6\",\n        onPress: function onPress() {\n          return deleteToDo(item.id);\n        }\n      })]\n    });\n  };\n  var showToDoList = function showToDoList() {\n    return _jsx(FlatList, {\n      data: toDos,\n      refreshing: isRefreshing,\n      onRefresh: function onRefresh() {\n        loadToDoList();\n        setIsRefreshing(true);\n      },\n      renderItem: renderToDoItem,\n      keyExtractor: function keyExtractor(item) {\n        return item.id;\n      }\n    });\n  };\n  var showContent = function showContent() {\n    return _jsxs(View, {\n      children: [isLoading ? _jsx(ActivityIndicator, {\n        size: \"large\"\n      }) : showToDoList(), _jsx(Button, {\n        title: \"Add ToDo\",\n        onPress: function onPress() {\n          return setModalVisible(true);\n        },\n        color: \"#fb4d3d\"\n      })]\n    });\n  };\n  var showSendVerificationEmail = function showSendVerificationEmail() {\n    return _jsxs(View, {\n      children: [_jsx(Text, {\n        children: \"Please verify your email to use ToDo\"\n      }), _jsx(Button, {\n        title: \"Send Verification Email\",\n        onPress: function onPress() {\n          return sendEmailVerification(auth.currentUser);\n        }\n      })]\n    });\n  };\n  var addToDo = function () {\n    var _ref5 = _asyncToGenerator(function* (todo) {\n      var toDoToSave = {\n        text: todo,\n        completed: false,\n        userId: auth.currentUser.uid\n      };\n      var docRef = yield addDoc(collection(db, \"todos\"), toDoToSave);\n      toDoToSave.id = docRef.id;\n      var updatedToDos = _toConsumableArray(toDos);\n      updatedToDos.push(toDoToSave);\n      setToDos(updatedToDos);\n    });\n    return function addToDo(_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  return _jsxs(SafeAreaView, {\n    children: [_jsx(View, {\n      style: [AppStyles.rowContainer, AppStyles.rightAligned, AppStyles.rightMargin, AppStyles.topMargin],\n      children: _jsx(InlineTextButton, {\n        text: \"Manage Account\",\n        color: \"#258ea6\",\n        onPress: function onPress() {\n          return navigation.navigate(\"ManageAccount\");\n        }\n      })\n    }), _jsx(Modal, {\n      animationType: \"slide\",\n      transparent: true,\n      visible: modalVisible,\n      onRequestClose: function onRequestClose() {\n        return setModalVisible(false);\n      },\n      children: _jsx(AddToDoModal, {\n        onClose: function onClose() {\n          return setModalVisible(false);\n        },\n        addToDo: addToDo\n      })\n    }), _jsx(Text, {\n      style: AppStyles.header,\n      children: \"ToDo\"\n    }), auth.currentUser.emailVerified ? showContent() : showSendVerificationEmail()]\n  });\n}","map":{"version":3,"names":["InlineTextButton","AppStyles","auth","db","collection","addDoc","query","where","getDocs","deleteDoc","doc","setDoc","sendEmailVerification","React","AddToDoModal","BouncyCheckbox","ToDo","navigation","useState","modalVisible","setModalVisible","isLoading","setIsLoading","isRefreshing","setIsRefreshing","toDos","setToDos","loadToDoList","q","currentUser","uid","querySnapshot","forEach","toDo","data","id","push","checkToDoItem","item","isChecked","toDoRef","completed","merge","deleteToDo","toDoId","updatedToDos","filter","renderToDoItem","rowContainer","rightMargin","leftMargin","fillSpace","complated","text","borderColor","showToDoList","showContent","showSendVerificationEmail","addToDo","todo","toDoToSave","userId","docRef","rightAligned","topMargin","navigate","header","emailVerified"],"sources":["/Users/tmetsasi/Desktop/Projects/PartyGame/party-game-app/screens/ToDo.js"],"sourcesContent":["import { View, Button, Text, Modal, SafeAreaView, ActivityIndicator, FlatList } from 'react-native';\nimport InlineTextButton from '../components/InlineTextButton';\nimport AppStyles from '../styles/AppStyles';\nimport { auth, db } from \"../firebase\";\nimport { collection, addDoc, query, where, getDocs, deleteDoc, doc, setDoc } from \"firebase/firestore\"; \nimport { sendEmailVerification } from 'firebase/auth';\nimport React from 'react';\nimport AddToDoModal from '../components/AddToDoModal';\nimport BouncyCheckbox from 'react-native-bouncy-checkbox';\n\nexport default function ToDo({ navigation }) {\n  let [modalVisible, setModalVisible] = React.useState(false);\n  let [isLoading, setIsLoading] = React.useState(true);\n  let [isRefreshing, setIsRefreshing] = React.useState(false);\n  let [toDos, setToDos] = React.useState([]);\n\n  let loadToDoList = async () => {\n    const q = query(collection(db, \"todos\"), where(\"userId\", \"==\", auth.currentUser.uid));\n\n    const querySnapshot = await getDocs(q);\n    let toDos = [];\n    querySnapshot.forEach((doc) => {\n      let toDo = doc.data();\n      toDo.id = doc.id;\n      toDos.push(toDo);\n    });\n\n    setToDos(toDos);\n    setIsLoading(false);\n    setIsRefreshing(false);\n  };\n\n  if (isLoading) {\n    loadToDoList();\n  }\n\n  let checkToDoItem = (item, isChecked) => {\n    const toDoRef = doc(db, 'todos', item.id);\n    setDoc(toDoRef, { completed: isChecked }, { merge: true });\n  };\n\n  let deleteToDo = async (toDoId) => {\n    await deleteDoc(doc(db, \"todos\", toDoId));\n    let updatedToDos = [...toDos].filter((item) => item.id != toDoId);\n    setToDos(updatedToDos);\n  };\n\n  let renderToDoItem = ({item}) => {\n    return (\n      <View style={[AppStyles.rowContainer, AppStyles.rightMargin, AppStyles.leftMargin]}>\n        <View style={AppStyles.fillSpace}>\n          <BouncyCheckbox\n            isChecked={item.complated}\n            size={25}\n            fillColor=\"#258ea6\"\n            unfillColor=\"#FFFFFF\"\n            text={item.text}\n            iconStyle={{ borderColor: \"#258ea6\" }}\n            onPress={(isChecked) => { checkToDoItem(item, isChecked)}}\n          />\n        </View>\n        <InlineTextButton text=\"Delete\" color=\"#258ea6\" onPress={() => deleteToDo(item.id)} />\n      </View>\n    );\n  }\n\n  let showToDoList = () => {\n    return (\n      <FlatList\n        data={toDos}\n        refreshing={isRefreshing}\n        onRefresh={() => {\n          loadToDoList();\n          setIsRefreshing(true);\n        }}\n        renderItem={renderToDoItem}\n        keyExtractor={item => item.id} />\n    )\n  };\n\n  let showContent = () => {\n    return (\n      <View>\n        {isLoading ? <ActivityIndicator size=\"large\" /> : showToDoList() }\n        <Button \n          title=\"Add ToDo\" \n          onPress={() => setModalVisible(true)} \n          color=\"#fb4d3d\" />\n      </View>\n    );\n  };\n\n  let showSendVerificationEmail = () => {\n    return (\n      <View>\n        <Text>Please verify your email to use ToDo</Text>\n        <Button title=\"Send Verification Email\" onPress={() => sendEmailVerification(auth.currentUser)} />\n      </View>\n    );\n  };\n\n  let addToDo = async (todo) => {\n    let toDoToSave = {\n      text: todo,\n      completed: false,\n      userId: auth.currentUser.uid\n    };\n    const docRef = await addDoc(collection(db, \"todos\"), toDoToSave);\n\n    toDoToSave.id = docRef.id;\n\n    let updatedToDos = [...toDos];\n    updatedToDos.push(toDoToSave);\n\n    setToDos(updatedToDos);\n  };\n  \n  return (\n    <SafeAreaView>\n      <View style={[AppStyles.rowContainer, AppStyles.rightAligned, AppStyles.rightMargin, AppStyles.topMargin]}>\n        <InlineTextButton text=\"Manage Account\" color=\"#258ea6\" onPress={() => navigation.navigate(\"ManageAccount\")}/>\n      </View>\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        onRequestClose={() => setModalVisible(false)}>\n        <AddToDoModal \n          onClose={() => setModalVisible(false)}\n          addToDo={addToDo} />\n      </Modal>\n      <Text style={AppStyles.header}>ToDo</Text>\n      {auth.currentUser.emailVerified ? showContent() : showSendVerificationEmail()}\n    </SafeAreaView>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}